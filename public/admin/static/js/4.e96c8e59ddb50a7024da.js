webpackJsonp([4],{1002:function(t,e,i){e=t.exports=i(984)(),e.push([t.i,".avatar-uploader,.avatar-uploader-icon{width:300px;height:200px}.avatar-uploader-icon{font-size:28px;color:#8c939d;line-height:200px;text-align:center;border:1px dashed #8c939d}.avatar,.el-upload{width:300px;height:200px}.avatar{object-fit:contain}","",{version:3,sources:["/Users/wei/codespace/www/yy/sjz610-admin/src/views/liveRoom.vue"],names:[],mappings:"AAKA,uCAHC,YAAa,AACb,YAAc,CAUd,AARD,sBACC,eAAgB,AAChB,cAAe,AAGf,kBAAmB,AACnB,kBAAmB,AACnB,yBAA2B,CAC3B,AAKD,mBAHC,YAAa,AACb,YAAc,CAMd,AAJD,QAGC,kBAAoB,CACpB",file:"liveRoom.vue",sourcesContent:["\n.avatar-uploader{\n\twidth: 300px;\n\theight: 200px;\n}\n.avatar-uploader-icon {\n\tfont-size: 28px;\n\tcolor: #8c939d;\n\twidth: 300px;\n\theight: 200px;\n\tline-height: 200px;\n\ttext-align: center;\n\tborder: 1px dashed #8c939d;\n}\n.el-upload{\n\twidth: 300px;\n\theight: 200px;\n}\n.avatar {\n\twidth: 300px;\n\theight: 200px;\n\tobject-fit: contain;\n}\n"],sourceRoot:""}])},1008:function(t,e,i){var a=i(1002);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(985)("5e098f8c",a,!0)},1014:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("h3",[t._v("会议/活动")]),t._v(" "),i("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择"},model:{value:t.meeting,callback:function(e){t.meeting=e},expression:"meeting"}},t._l(t.options,function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:e}})})),t._v(" "),i("h3",[t._v("现场图片（为了保证页面加载速度，图片请不要超过1M）")]),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"//up.qbox.me/","show-file-list":!1,data:t.uploadform,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.img?i("img",{staticClass:"avatar",attrs:{src:t.img}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),i("h3",[t._v("文字")]),t._v(" "),i("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入内容"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),i("br"),t._v(" "),i("el-button",{staticStyle:{"margin-top":"30px",width:"100px"},attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.isPublish?"发布":"保存"))]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"30px",width:"200px"},attrs:{type:"primary"},on:{click:t.getGridData}},[t._v("修改已经发布的内容")]),t._v(" "),i("el-dialog",{attrs:{title:t.options[t.meeting-0].label+" 已经发布的内容",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("el-table",{attrs:{data:t.gridData}},[i("el-table-column",{attrs:{property:"img",label:"图片",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{width:"150px",height:"120px"}},[i("img",{staticStyle:{width:"100%",height:"100%","object-fit":"contain"},attrs:{src:t.row.img,alt:""}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"text",label:"文字"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.putClick(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.deleteClick(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]}},987:function(t,e,i){i(1008);var a=i(118)(i(993),i(1014),null,null);t.exports=a.exports},993:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(232),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){return{options:[{label:"2018中国（石家庄）“互联网+旅游”特色小镇峰会"},{label:"第二届石家庄市旅游产业发展大会开幕式"},{label:"大型实景演出"},{label:"旅游项目线路观摩"},{label:"石家庄市创建全域旅游示范市工作推进会"},{label:"第五届石家庄旅游交易会"},{label:"《全民导游》颁奖典礼"}],gridData:[],meeting:0,img:"",text:"",isPublish:!0,putDataId:"",dialogTableVisible:!1,uploadform:{key:"",token:""}}},methods:{handleAvatarSuccess:function(t,e,i){this.img=""+this.host.imgBaseUrl+t.key},beforeAvatarUpload:function(t){var e=t.size/1024/1024<1,i=this;if(e){var a={fileName:t.name};return s.default.get(i.host.baseUrl+"/uploadimg",{params:a}).then(function(t){"1"===t.data.code?i.uploadform={key:t.data.result.fileName,token:t.data.result.uploadToken}:i.$message.error("上传图片失败")}).catch(function(){i.$message.error("上传图片失败")})}return i.$message.error("上传图片大小不能超过 1MB!"),e},succ:function(t){this.$message({message:"操作成功！",type:"success"}),this.img="",this.text="",this.putDataId="",this.isPublish=!0},error:function(t){console.log(t)},submit:function(){if(0!=this.img.length||0!=this.text){var t={meeting:this.meeting,img:this.img,text:this.text};this.isPublish?this.ajax.http("post",this.host.baseUrl+"/livingmsg",t,this.succ,this.error):(t._id=this.putDataId,this.ajax.http("put",this.host.baseUrl+"/livingmsg",t,this.succ,this.error))}else this.$message({message:"请至少上传图片或者填写文字",type:"error"})},getGridData:function(){this.getMsg()},getMsg:function(){function t(t){e.gridData=t.data,e.dialogTableVisible=!0}var e=this;this.ajax.http("get",this.host.baseUrl+"/livingmsg",{meeting:this.meeting},t,this.error)},putClick:function(t){this.img=t.img,this.text=t.text,this.putDataId=t._id,this.isPublish=!1,this.dialogTableVisible=!1},deleteClick:function(t){this.ajax.http("delete",this.host.baseUrl+"/livingmsg",{_id:t._id},this.getMsg,this.error)}}}}});
//# sourceMappingURL=4.e96c8e59ddb50a7024da.js.map